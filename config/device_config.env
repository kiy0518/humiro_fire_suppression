# =============================================================================
# ClusterDrone - 기체별 설정 파일
# =============================================================================
# 각 VIM4에서 이 파일만 수정 후 sudo ./003-apply_config.sh 실행
# =============================================================================

# -----------------------------------------------------------------------------
# 기체 식별 (필수)
# -----------------------------------------------------------------------------
DRONE_ID=1                        # 드론 번호 (1, 2, 3)
ROS_NAMESPACE=drone1              # ROS 2 네임스페이스 (drone1, drone2, drone3)

# -----------------------------------------------------------------------------
# 네트워크: eth0 (VIM4 ↔ FC)
# -----------------------------------------------------------------------------
ETH0_IP=10.0.0.11                 # VIM4 eth0 IP (1=.11, 2=.21, 3=.31)
FC_IP=10.0.0.12                   # FC IP (1=.12, 2=.22, 3=.32)
                                  # DHCP 범위가 FC_IP 하나로 제한되어 항상 고정

# -----------------------------------------------------------------------------
# 네트워크: WiFi (VIM4 ↔ QGC)
# -----------------------------------------------------------------------------
WIFI_INTERFACE=wlan0

# WiFi 우선순위 1 (가장 먼저 시도)
WIFI_SSID_1="Easy_System_5G"
WIFI_PASSWORD_1="EZsystem5G"

# WiFi 우선순위 2 (선택사항, 사용 안 하면 빈 문자열로 유지)
WIFI_SSID_2="humiro_5G"
WIFI_PASSWORD_2="hmr0902@"

# WiFi 우선순위 3 (선택사항, 사용 안 하면 빈 문자열로 유지)
WIFI_SSID_3="RaonSlab5G"
WIFI_PASSWORD_3="Raon..2014"



# WiFi 네트워크 설정 (모든 WiFi에 공통 적용)
WIFI_IP=192.168.100.11        # VIM4 WiFi IP (A=.11, B=.21, C=.31)
WIFI_NETMASK=255.255.255.0
WIFI_GATEWAY=192.168.100.1

# -----------------------------------------------------------------------------
# QGroundControl 연결
# -----------------------------------------------------------------------------
# QGC_IP는 브로드캐스트 주소 자동 사용 (WiFi 서브넷 기반)
# 예: WIFI_IP=192.168.100.31 → 브로드캐스트=192.168.100.255
# 모든 QGC가 MAVLink 메시지를 수신 가능
QGC_UDP_PORT=14550                # UDP 포트 (QGC 표준 포트, 테스트 시 14551 사용)
                                  # 테스트: export QGC_UDP_PORT=14551 또는 device_config.env 수정

# -----------------------------------------------------------------------------
# 고정 값 (수정 불필요)
# -----------------------------------------------------------------------------
ROS_DOMAIN_ID=0                   # 군집 비행을 위해 모든 기체가 0 사용
XRCE_DDS_PORT=8888                # micro-ROS Agent 포트
FC_MAVLINK_PORT=14540             # FC MAVLink 포트

# -----------------------------------------------------------------------------
# 기체별 설정 요약
# -----------------------------------------------------------------------------
#
# | 드론 | DRONE_ID | ETH0_IP    | FC_IP      | WIFI_IP        |
# |------|----------|------------|------------|----------------|
# |  1   |    1     | 10.0.0.11  | 10.0.0.12  | 192.168.100.11 |
# |  2   |    2     | 10.0.0.21  | 10.0.0.22  | 192.168.100.21 |
# |  3   |    3     | 10.0.0.31  | 10.0.0.32  | 192.168.100.31 |
#
# QGC 연결: 브로드캐스트 (192.168.100.255:14550)
#   - 모든 드론이 같은 포트(14550)로 브로드캐스트
#   - QGC에서 MAV_SYS_ID로 기체 자동 구분
#   - QGC IP 변경 시 VIM4 설정 변경 불필요
#
# 적용 방법:
#   1. 이 파일 수정
#   2. sudo ./003-apply_config.sh 실행
#   3. sudo reboot
# -----------------------------------------------------------------------------
