# LD19 LiDAR 기술 사양 및 원리

## 1. 원리 및 시스템 소개

### 시스템 구성

LD19는 주로 다음 구성 요소로 이루어져 있습니다:
- **레이저 거리 측정 코어** (Laser ranging core)
- **무선 전력 전송 단위** (Wireless power transmission unit)
- **무선 통신 단위** (Wireless communication unit)
- **각도 측정 단위** (Angle measuring unit)
- **모터 구동 단위** (Motor drive unit)
- **기계적 하우징** (Mechanical housing)

### 거리 측정 원리 (DTOF 기술)

LD19는 **DTOF (Direct Time of Flight)** 기술을 사용하여 초당 **4,500회 측정**을 수행합니다.

**측정 과정:**

1. **레이저 발사**
   - LD19가 전방으로 적외선 레이저를 발사합니다

2. **반사 신호 수신**
   - 레이저가 표적 물체에 부딪히면 단일 광자 수신 단위로 반사되어 돌아옵니다

3. **시간 차이 계산**
   - 레이저 발사 시점과 수신 시점의 시간 차이를 측정합니다
   - 이 시간 차이가 **광의 비행 시간 (Time of Flight)**입니다

4. **거리 계산**
   - 광속과 비행 시간을 결합하여 거리를 계산합니다
   - **거리 = (광속 × 비행 시간) / 2**

### 데이터 처리 및 통신

1. **포인트 클라우드 생성**
   - 거리 데이터를 획득한 후
   - 각도 측정 단위에서 측정한 각도 값과 통합하여
   - **포인트 클라우드 데이터**를 형성합니다

2. **무선 통신**
   - 포인트 클라우드 데이터를 무선 통신을 통해 외부 인터페이스로 전송합니다

3. **모터 제어**
   - 외부 인터페이스가 PWM 신호를 제공하여 모터 구동 단위를 제어합니다
   - 외부 제어 단위가 속도를 획득하고
   - **PID 알고리즘을 사용한 폐루프 제어**로 지정된 속도로 제어하여
   - LD19가 안정적으로 작동하도록 합니다

## 핵심 기술 요약

### DTOF (Direct Time of Flight)
- **측정 속도**: 초당 4,500회
- **측정 방식**: 적외선 레이저 발사 → 반사 신호 수신 → 시간 차이 측정
- **거리 계산**: 광속 × 비행 시간

### 포인트 클라우드
- 거리 데이터 + 각도 데이터 = 3D 포인트 클라우드
- 360° 스캔으로 전체 환경 정보 제공

### 제어 시스템
- **PWM**: 모터 속도 제어
- **PID 제어**: 폐루프 제어로 안정적인 작동 보장

## 프로젝트 적용

### 현재 구현
- **통신**: UART 230400 baud
- **포트**: VIM4 UART_E (/dev/ttyS4)
- **데이터**: 360° 스캔, 10Hz 업데이트
- **범위**: 0.05m ~ 12m

### 데이터 활용
- 거리 측정 (10m 도착 판단)
- 거리 오버레이 (색상 코딩)
- 3D 위치 계산 (targeting 시스템과 통합 예정)

